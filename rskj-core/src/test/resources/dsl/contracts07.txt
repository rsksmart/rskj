account_new acc1 1000000000

# create contract sendtest.sol (source code in this folder)

transaction_build tx01
    sender acc1
    receiverAddress 00
    value 0
    data 6060604052341561000f57600080fd5b5b6102fc8061001f6000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806327e235e31461005457806345d9a1ce146100a1578063d0e30db014610102575b600080fd5b341561005f57600080fd5b61008b600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061010c565b6040518082815260200191505060405180910390f35b34156100ac57600080fd5b610100600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610124565b005b61010a610281565b005b60006020528060005260406000206000915090505481565b806000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055507f51a7f65c6325882f237d4aeb43228179cfad48b868511d508e24b4437a81913760405180806020018281038252601e8152602001807f616d6f756e7420737562747261637465642066726f6d2062616c616e6365000081525060200191505060405180910390a18173ffffffffffffffffffffffffffffffffffffffff168160405160006040518083038185876187965a03f192505050151561021357600080fd5b7f51a7f65c6325882f237d4aeb43228179cfad48b868511d508e24b4437a8191376040518080602001828103825260118152602001807f726571756972652063616c6c20646f6e6500000000000000000000000000000081525060200191505060405180910390a15b505050565b346000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b5600a165627a7a723058202cb603c1b8b7affd0007fde486d8f1d6dc8ed318e369b60277d18be9fa1636520029
    #data 6060604052341561000f57600080fd5b61034f8061001e6000396000f300606060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806327e235e31461005c57806345d9a1ce146100a9578063d0e30db01461010a575b600080fd5b341561006757600080fd5b610093600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610114565b6040518082815260200191505060405180910390f35b34156100b457600080fd5b610108600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061012c565b005b6101126102d5565b005b60006020528060005260406000206000915090505481565b806000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561017957600080fd5b806000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055507f51a7f65c6325882f237d4aeb43228179cfad48b868511d508e24b4437a81913760405180806020018281038252601e8152602001807f616d6f756e7420737562747261637465642066726f6d2062616c616e6365000081525060200191505060405180910390a18173ffffffffffffffffffffffffffffffffffffffff168160405160006040518083038185876187965a03f192505050151561026857600080fd5b7f51a7f65c6325882f237d4aeb43228179cfad48b868511d508e24b4437a8191376040518080602001828103825260118152602001807f726571756972652063616c6c20646f6e6500000000000000000000000000000081525060200191505060405180910390a1505050565b346000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505600a165627a7a72305820d97d7914a9d589e276e5f344d32f15865528e80e91c20525c6e93d0f7a9fe5840029
    gas 1000000
    build

block_build b01
    parent g00
    transactions tx01
    build

block_connect b01

# Assert best block
assert_best b01

# deposit transaction

transaction_build tx02
    sender acc1
    nonce 1
    contract tx01   # created in tx01
    value 100000000
    data d0e30db0
    gas 1000000
    build

block_build b02
    parent b01
    transactions tx02
    build

block_connect b02

# Assert best block
assert_best b02

# withdrawBalance transaction (500 weis to account 67bde3af536b093abcee56fbdf2e003453186dc5)

transaction_build tx03
    sender acc1
    nonce 2
    contract tx01   # created in tx01
    value 0
    data 45d9a1ce00000000000000000000000028fdc38c327f4a3bbdf9501fd3a01ac7228c7af700000000000000000000000067bde3af536b093abcee56fbdf2e003453186dc500000000000000000000000000000000000000000000000000000000000001f4
    gas 3000000
    build

block_build b03
    parent b02
    transactions tx03
    build

block_connect b03

# Assert best block
assert_best b03

# check account balance after withdraw
assert_balance 67bde3af536b093abcee56fbdf2e003453186dc5 500

